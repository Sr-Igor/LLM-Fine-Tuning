# ============================================================================
# Configuração MLX para Apple Silicon (.env.mlx.example)
# ============================================================================
# Renomeie para envs/.env.apple ou source antes de rodar make mlx:*
# ============================================================================

# ----------------------------------------------------------------------------
# MODELO
# ----------------------------------------------------------------------------
# Nome do modelo HuggingFace a ser usado
# Modelos suportados: Qwen 2.5 (3B, 7B, 14B, 32B), Llama 3.x, Mistral, etc.
APPLE_MODEL_NAME=mlx-community/Qwen2.5-14B-Instruct-4bit

# Comprimento máximo da sequência (tokens)
APPLE_MAX_SEQ_LENGTH=2048

# ----------------------------------------------------------------------------
# LORA (Low-Rank Adaptation)
# ----------------------------------------------------------------------------
APPLE_LORA_LAYERS=16
APPLE_LORA_RANK=16
APPLE_LORA_ALPHA=16
APPLE_LORA_DROPOUT=0.0

# ----------------------------------------------------------------------------
# TREINAMENTO
# ----------------------------------------------------------------------------
# Tamanho do batch (Ajuste conforme memória disponível)
APPLE_BATCH_SIZE=2

# Taxa de aprendizado
APPLE_LEARNING_RATE=1e-5

# Número total de iterações de treinamento
APPLE_NUM_ITERS=600

# Steps entre avaliações no conjunto de validação
APPLE_STEPS_PER_EVAL=100

# Steps entre relatórios de progresso
APPLE_STEPS_PER_REPORT=10

# Número de batches para validação
APPLE_VAL_BATCHES=25

# Salvar checkpoint a cada N steps
APPLE_SAVE_EVERY=100

# ----------------------------------------------------------------------------
# DADOS
# ----------------------------------------------------------------------------
APPLE_TRAIN_DATA=data/train.jsonl
APPLE_VALID_DATA=data/valid.jsonl
APPLE_DATA_DIR=data

# ----------------------------------------------------------------------------
# OUTPUT
# ----------------------------------------------------------------------------
APPLE_ADAPTER_PATH=adapters_mlx
APPLE_FUSED_MODEL=models/planus_mlx_fused
APPLE_GGUF_OUTPUT=models/planus_mlx.gguf

# ----------------------------------------------------------------------------
# OTIMIZAÇÕES APPLE SILICON
# ----------------------------------------------------------------------------
APPLE_USE_METAL=true
APPLE_GRAD_CHECKPOINT=true
APPLE_SEED=42
